<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë¡±í†¤ ì•ˆì •ë„ ì ìˆ˜í™” (í•˜ëª¨ë‹ˆì¹´ ì²´í—˜ Â· ì¬ì¸¡ì • ìµœì†Œí™”)</title>
  <style>
    :root{
      --bg:#0b1020; --card:#111a33; --border:#1e2a55; --muted:#a9b7d6; --text:#eaf0ff;
      --teal:#2dd4bf; --pink:#fb7185; --blue:#93c5fd; --line:#2b3a70;
    }
    *{box-sizing:border-box}
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
    .wrap { max-width: 860px; margin: 0 auto; padding: 22px; }
    .card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content: space-between; }
    h1 { font-size:18px; margin:0; font-weight:1000; }
    .muted { color:var(--muted); font-size:13px; line-height:1.45; }
    button { cursor:pointer; border:0; border-radius:14px; padding:12px 14px; font-weight:1000; transition:transform .06s ease, opacity .15s ease; }
    button:active{ transform:scale(.98); }
    button:disabled{ opacity:.6; cursor:not-allowed; }
    .primary { background:var(--teal); color:#071019; }
    .ghost { background:transparent; color:#cfe0ff; border:1px solid var(--line); }
    .pill { font-size:12px; padding:7px 10px; border:1px solid var(--line); border-radius:999px; color:#cfe0ff; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:12px; }
    @media (max-width: 760px){ .grid{ grid-template-columns: 1fr; } }
    .mini { border:1px solid var(--line); background:#0d1530; border-radius:16px; padding:12px; }
    .big { font-size:40px; font-weight:1100; letter-spacing:.2px; }
    .k { font-size:12px; color:var(--muted); font-weight:900; margin-bottom:4px; }
    .v { font-size:20px; font-weight:1100; }
    .barWrap{ height:14px; border-radius:999px; border:1px solid #233162; background:rgba(255,255,255,.03); overflow:hidden; }
    .bar{ height:100%; width:0%; background:linear-gradient(90deg, var(--blue), var(--teal)); transition:width .12s linear; }
    .hint { font-size:12px; color:var(--muted); margin-top:10px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
    .note { margin-top:10px; padding:12px; border-radius:14px; border:1px solid #233162; background:rgba(255,255,255,.02); }
    .tipBox{ margin-top:12px; padding:12px; border-radius:14px; border:1px dashed #2b3a70; background:rgba(255,255,255,.02); }
    .tipBox b{ color:#d9ecff; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row">
        <div>
          <h1>ë¡±í†¤ ì•ˆì •ë„ ì ìˆ˜í™” â€” í•˜ëª¨ë‹ˆì¹´ ì²´í—˜(ì¬ì¸¡ì • ìµœì†Œí™”)</h1>
          <div class="muted" style="margin-top:6px;">
            ë²„íŠ¼ì„ ëˆ„ë¥´ê³  <b>í•œ ìŒì„ 3ì´ˆ</b> ìœ ì§€í•´ ë³´ì„¸ìš”. (ì›Œë°ì—… 0.7ì´ˆ + ì¸¡ì • 3ì´ˆ)<br/>
            ì´ ë²„ì „ì€ í•˜ëª¨ë‹ˆì¹´ í™˜ê²½ì—ì„œ <b>ì ìˆ˜ê°€ ë¬´ì¡°ê±´ ë‚˜ì˜¤ë„ë¡</b> â€œì¬ì¸¡ì •â€ íŒì •ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤.
          </div>
        </div>
        <span class="pill mono" id="status">idle</span>
      </div>

      <div class="tipBox">
        <div class="muted">
          âœ… ì„±ê³µë¥  ì˜¬ë¦¬ëŠ” ìì„¸: <b>ë§ˆì´í¬ 15~25cm</b>, <b>ì •ë©´ âŒ / 45Â° ì˜†ìœ¼ë¡œ âœ…</b>, <b>ì¤‘ê°„ ì„¸ê¸° + ì¼ì •</b><br/>
          âœ… ì¶”ì²œ í…ŒìŠ¤íŠ¸: <b>4~6í™€</b> (ì €ìŒ 1~2í™€ì€ ì¸ì‹ì´ ë” ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
        </div>
      </div>

      <div class="grid">
        <div class="mini">
          <div class="row" style="justify-content:flex-start;">
            <button class="primary" id="startBtn">ğŸ¤ ë¡±í†¤ ì¸¡ì • ì‹œì‘</button>
            <button class="ghost" id="stopBtn" disabled>ì¤‘ì§€</button>
            <button class="ghost" id="resetBtn">ë¦¬ì…‹</button>
          </div>

          <div style="margin-top:12px;">
            <div class="k">ì§„í–‰</div>
            <div class="barWrap"><div class="bar" id="bar"></div></div>
            <div class="hint" id="phaseHint">ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.</div>
          </div>

          <div class="note" style="margin-top:12px;">
            <div class="k">ì‹¤ì‹œê°„(ì°¸ê³ ìš©)</div>
            <div class="muted">
              <div>Pitch: <span class="mono" id="hz">-</span> Hz</div>
              <div>Note: <span class="mono" id="note">-</span></div>
              <div>Cents: <span class="mono" id="cents">-</span></div>
              <div>RMS: <span class="mono" id="rms">-</span></div>
              <div>Confidence: <span class="mono" id="conf">-</span></div>
              <div class="hint">â€» ì°¸ê³ : í•˜ëª¨ë‹ˆì¹´ëŠ” confidenceê°€ ë‚®ê²Œ ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ í”í•©ë‹ˆë‹¤.</div>
            </div>
          </div>
        </div>

        <div class="mini">
          <div class="k">ìµœì¢… ì ìˆ˜</div>
          <div class="big" id="finalScore">â€”</div>
          <div class="muted" id="oneLine">ì¸¡ì • í›„ í•œ ì¤„ ì½”ë©˜íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>

          <div style="margin-top:12px;">
            <div class="row" style="gap:10px;">
              <div style="flex:1;">
                <div class="k">ì •í™•ë„(ìŒì •)</div>
                <div class="v"><span id="sInt">â€”</span><span class="muted"> /100</span></div>
              </div>
              <div style="flex:1;">
                <div class="k">ì•ˆì •ë„(í”ë“¤ë¦¼)</div>
                <div class="v"><span id="sStab">â€”</span><span class="muted"> /100</span></div>
              </div>
            </div>
            <div class="row" style="gap:10px; margin-top:10px;">
              <div style="flex:1;">
                <div class="k">ìœ ì§€í’ˆì§ˆ(ìœ íš¨ë¹„ìœ¨)</div>
                <div class="v"><span id="sHold">â€”</span><span class="muted"> /100</span></div>
              </div>
              <div style="flex:1;">
                <div class="k">ìš”ì•½ ì§€í‘œ</div>
                <div class="muted">
                  í‰ê· ì˜¤ì°¨: <span class="mono" id="meanAbs">-</span>c<br/>
                  í”ë“¤ë¦¼(MAD): <span class="mono" id="mad">-</span>c<br/>
                  ìœ íš¨ë¹„ìœ¨: <span class="mono" id="validRatio">-</span>
                </div>
              </div>
            </div>
          </div>

          <div class="note" style="margin-top:12px;">
            <div class="k">ì„¤ëª…</div>
            <div class="muted">
              â€¢ ì •í™•ë„: ëª©í‘œ ìŒì— ì–¼ë§ˆë‚˜ ê°€ê¹Œìš´ì§€(í‰ê·  ì˜¤ì°¨)<br/>
              â€¢ ì•ˆì •ë„: í”ë“¤ë¦¼ì´ ì–¼ë§ˆë‚˜ ì‘ì€ì§€(MAD)<br/>
              â€¢ ìœ ì§€í’ˆì§ˆ: â€œìœ íš¨ í”„ë ˆì„ ë¹„ìœ¨â€ (ì¡ìŒ/ìˆ¨ë°”ëŒì´ ë§ìœ¼ë©´ ë‚´ë ¤ê°‘ë‹ˆë‹¤)<br/>
            </div>
          </div>
        </div>
      </div>

      <div class="hint" style="margin-top:12px;">
        â€» ì´ ë²„ì „ì€ â€œì²´í—˜ ì„±ê³µâ€ì„ ìœ„í•´ ì¬ì¸¡ì •ì„ ì œê±°í–ˆìŠµë‹ˆë‹¤. ì´í›„ ì •í™•ë„ë¥¼ ì˜¬ë¦¬ë ¤ë©´ í”¼ì¹˜ ì•Œê³ ë¦¬ì¦˜(YIN/MPM)ë¡œ êµì²´í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.
      </div>
    </div>
  </div>

<script>
/**
 * í•˜ëª¨ë‹ˆì¹´ ì²´í—˜íŒ(ì¬ì¸¡ì • ìµœì†Œí™”):
 * - ì›Œë°ì—… 0.7s + ì¸¡ì • 3.0s
 * - confidenceGate ë§¤ìš° ì™„í™”(0.25)
 * - RMS ìƒëŒ€ ê²Œì´íŠ¸ ì™„í™”(0.12) + ìµœì†Œ RMS 0.006
 * - âœ… ì‹¤íŒ¨(ì¬ì¸¡ì •) íŒì • ì œê±°: failed = false
 * - ë§ˆì´í¬ DSP(ë…¸ì´ì¦ˆ ì–µì œ/AGC) ë¹„í™œì„±í™” ì‹œë„(ê¸°ê¸° ë”°ë¼ ë” ì˜ ì¡í˜)
 * - outlier ì œê±°(ì¤‘ì•™ê°’ì—ì„œ Â±50c ì´ˆê³¼ ì œì™¸)
 */

const UI = {
  status: document.getElementById("status"),
  startBtn: document.getElementById("startBtn"),
  stopBtn: document.getElementById("stopBtn"),
  resetBtn: document.getElementById("resetBtn"),
  bar: document.getElementById("bar"),
  phaseHint: document.getElementById("phaseHint"),
  hz: document.getElementById("hz"),
  note: document.getElementById("note"),
  cents: document.getElementById("cents"),
  rms: document.getElementById("rms"),
  conf: document.getElementById("conf"),

  finalScore: document.getElementById("finalScore"),
  oneLine: document.getElementById("oneLine"),
  sInt: document.getElementById("sInt"),
  sStab: document.getElementById("sStab"),
  sHold: document.getElementById("sHold"),
  meanAbs: document.getElementById("meanAbs"),
  mad: document.getElementById("mad"),
  validRatio: document.getElementById("validRatio")
};

const CFG = {
  warmupMs: 700,
  measureMs: 3000,
  frameMs: 20,
  confidenceGate: 0.25,   // âœ… ë” ì™„í™”
  outlierCents: 50,
  floorScore: 20
};

let ac=null, analyser=null, src=null, stream=null;
let running=false;
let tickTimer=null;
let t0=0;

let windowRms=[];
let centsSamples=[];
let allFrames=0;
let validFrames=0;

// ----------- Helpers -----------
function clamp(x,a,b){ return Math.max(a, Math.min(b,x)); }
function median(arr){
  if (!arr.length) return NaN;
  const a = arr.slice().sort((x,y)=>x-y);
  const mid = Math.floor(a.length/2);
  return a.length%2 ? a[mid] : (a[mid-1]+a[mid])/2;
}
function mad(arr){
  if (!arr.length) return NaN;
  const m = median(arr);
  const dev = arr.map(x=>Math.abs(x-m));
  return median(dev);
}
function meanAbs(arr){
  if (!arr.length) return NaN;
  return arr.reduce((s,x)=>s+Math.abs(x),0)/arr.length;
}
function hzToNoteName(freq){
  const A4 = 440;
  const midi = 69 + 12 * Math.log2(freq / A4);
  const rounded = Math.round(midi);
  const names = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
  const name = names[(rounded % 12 + 12) % 12];
  const oct = Math.floor(rounded/12) - 1;
  const noteFreq = A4 * Math.pow(2, (rounded - 69)/12);
  const cents = 1200 * Math.log2(freq / noteFreq);
  return { name: name + oct, cents, targetHz: noteFreq, midi: rounded };
}

// ê°„ë‹¨ ì˜¤í† ì½”ë¦´ë ˆì´ì…˜ í”¼ì¹˜ ì¶”ì •(ì²´í—˜ìš©)
function autoCorrelatePitch(timeData, sampleRate){
  const SIZE = timeData.length;

  let rms=0;
  for (let i=0;i<SIZE;i++){
    const v=timeData[i];
    rms += v*v;
  }
  rms = Math.sqrt(rms/SIZE);

  if (rms < 0.006) return { freq: 0, confidence: 0, rms };

  // âœ… ì €ìŒë„ ì¡°ê¸ˆ í—ˆìš©(í•˜ëª¨ë‹ˆì¹´ ë²”ìœ„ í™•ì¥)
  const minFreq = 80;
  const maxFreq = 1200;

  const minLag = Math.floor(sampleRate / maxFreq);
  const maxLag = Math.floor(sampleRate / minFreq);

  let bestOffset = -1;
  let bestCorr = 0;
  let lastCorr = 1;

  for (let lag = minLag; lag <= maxLag; lag++){
    let corr = 0;
    for (let i=0; i<SIZE - lag; i++){
      corr += timeData[i] * timeData[i+lag];
    }
    corr = corr / (SIZE - lag);

    if (corr > bestCorr && corr > lastCorr){
      bestCorr = corr;
      bestOffset = lag;
    }
    lastCorr = corr;
  }

  if (bestOffset === -1) return { freq: 0, confidence: 0, rms };

  const confidence = clamp(bestCorr, 0, 1);
  const freq = sampleRate / bestOffset;
  return { freq, confidence, rms };
}

function setStatus(s){ UI.status.textContent = s; }

// ----------- Core flow -----------
async function initAudio(){
  // âœ… í•˜ëª¨ë‹ˆì¹´ì—ì„œ DSPê°€ í”¼ì¹˜ë¥¼ ë§ì¹˜ëŠ” ê²½ìš°ê°€ ìˆì–´ ë¹„í™œì„±í™” ì‹œë„
  stream = await navigator.mediaDevices.getUserMedia({
    audio: {
      echoCancellation: false,
      noiseSuppression: false,
      autoGainControl: false
    }
  });
  ac = new (window.AudioContext || window.webkitAudioContext)();
  analyser = ac.createAnalyser();
  analyser.fftSize = 2048;
  analyser.smoothingTimeConstant = 0.0;
  src = ac.createMediaStreamSource(stream);
  src.connect(analyser);
}

function resetAll(){
  windowRms = [];
  centsSamples = [];
  allFrames = 0;
  validFrames = 0;

  UI.bar.style.width = "0%";
  UI.phaseHint.textContent = "ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤.";
  UI.finalScore.textContent = "â€”";
  UI.oneLine.textContent = "ì¸¡ì • í›„ í•œ ì¤„ ì½”ë©˜íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.";
  UI.sInt.textContent = UI.sStab.textContent = UI.sHold.textContent = "â€”";
  UI.meanAbs.textContent = UI.mad.textContent = UI.validRatio.textContent = "-";
  UI.hz.textContent = UI.note.textContent = UI.cents.textContent = UI.rms.textContent = UI.conf.textContent = "-";
  setStatus("idle");
}

function stop(){
  running=false;
  clearInterval(tickTimer);
  tickTimer=null;
  UI.startBtn.disabled=false;
  UI.stopBtn.disabled=true;
  setStatus("stopped");

  if (ac){ try{ ac.close(); }catch{} ac=null; }
  if (stream){
    stream.getTracks().forEach(t=>t.stop());
    stream=null;
  }
}

function scoreAndRender(){
  const ratio = allFrames ? (validFrames / allFrames) : 0;

  // outlier ì œê±°: ì¤‘ì•™ê°’ ê¸°ì¤€ Â±50c
  let filtered = centsSamples.slice();
  if (filtered.length){
    const m = median(filtered);
    filtered = filtered.filter(x => Math.abs(x - m) <= CFG.outlierCents);
  }

  const meanAbsC = meanAbs(filtered);
  const madC = mad(filtered);

  // Intonation
  let intonation = 0;
  if (!Number.isFinite(meanAbsC)) intonation = 0;
  else intonation = clamp(100 - (meanAbsC - 5) * 4, CFG.floorScore, 100);

  // Stability
  let stability = 0;
  if (!Number.isFinite(madC)) stability = 0;
  else stability = clamp(100 - (madC - 3) * 6, CFG.floorScore, 100);

  // Hold(í•˜ëª¨ë‹ˆì¹´ ì²´í—˜ìš©)
  let hold = clamp(((ratio - 0.6) / 0.3) * 100, 0, 100);

  // âœ… ì¬ì¸¡ì • ì œê±°(ì²´í—˜ ì„±ê³µ ëª¨ë“œ)
  const failed = false;

  const final = Math.round(0.45*stability + 0.35*intonation + 0.20*hold);

  UI.sInt.textContent = String(Math.round(intonation));
  UI.sStab.textContent = String(Math.round(stability));
  UI.sHold.textContent = String(Math.round(hold));
  UI.finalScore.textContent = String(final);

  UI.meanAbs.textContent = Number.isFinite(meanAbsC) ? meanAbsC.toFixed(1) : "-";
  UI.mad.textContent = Number.isFinite(madC) ? madC.toFixed(1) : "-";
  UI.validRatio.textContent = ratio ? ratio.toFixed(2) : "0.00";

  // í•œ ì¤„ ì½”ë©˜íŠ¸(ìœ íš¨ë¹„ìœ¨ì´ ë‚®ìœ¼ë©´ í™˜ê²½ ì•ˆë‚´)
  let comment = "";
  if (ratio < 0.35 || filtered.length < 10){
    comment = "ìœ íš¨ ì‹ í˜¸ê°€ ì ìŠµë‹ˆë‹¤. 20cm ê±°ë¦¬ + 45Â° ì˜†ìœ¼ë¡œ + ì¤‘ê°„ ì„¸ê¸°ë¡œ ë‹¤ì‹œ í•˜ë©´ ì ìˆ˜ê°€ ë” ì •í™•í•´ì§‘ë‹ˆë‹¤.";
  } else if (stability >= 80 && intonation >= 80){
    comment = "ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤. ì•ˆì •ë„ì™€ ìŒì •ì´ ëª¨ë‘ í›Œë¥­í•©ë‹ˆë‹¤.";
  } else if (stability < 65){
    comment = "í”¼ì¹˜ í”ë“¤ë¦¼ì´ í½ë‹ˆë‹¤. ìˆ¨ì„ ë” ì¼ì •í•˜ê²Œ ìœ ì§€í•´ë´…ë‹ˆë‹¤(ë°°ì— í˜).";
  } else if (intonation < 65){
    comment = "í‰ê·  ìŒì • ì˜¤ì°¨ê°€ í½ë‹ˆë‹¤. ê°™ì€ ì„¸ê¸°ë¡œ ì¼ì •í•˜ê²Œ ë¶ˆì–´ ê¸°ì¤€ìŒì„ ë§ì¶°ë´…ë‹ˆë‹¤.";
  } else {
    comment = "ì¢‹ìŠµë‹ˆë‹¤. ì§€ê¸ˆ ìƒíƒœì—ì„œ 3ì´ˆ â†’ 5ì´ˆë¡œ ìœ ì§€ ì‹œê°„ì„ ëŠ˜ë ¤ë´…ë‹ˆë‹¤.";
  }
  UI.oneLine.textContent = comment;
}

async function start(){
  if (running) return;
  try{
    UI.startBtn.disabled=true;
    UI.stopBtn.disabled=false;
    setStatus("requesting micâ€¦");

    await initAudio();
    resetAll();
    setStatus("running");

    running=true;
    t0 = performance.now();
    let phase = "warmup";
    UI.phaseHint.textContent = "ì›Œë°ì—… 0.7ì´ˆ: í•œ ìŒì„ í¸í•˜ê²Œ ë‚´ê³  ì•ˆì •ì‹œí‚µë‹ˆë‹¤.";
    UI.bar.style.width = "0%";

    const timeData = new Float32Array(analyser.fftSize);

    tickTimer = setInterval(()=>{
      if (!running) return;

      analyser.getFloatTimeDomainData(timeData);
      const { freq, confidence, rms } = autoCorrelatePitch(timeData, ac.sampleRate);

      // ìµœê·¼ RMS ìœˆë„ìš°(1ì´ˆ)
      windowRms.push(rms);
      if (windowRms.length > Math.floor(1000/CFG.frameMs)) windowRms.shift();
      const rmsAvg = windowRms.reduce((s,x)=>s+x,0) / windowRms.length;

      // âœ… ìƒëŒ€ ê²Œì´íŠ¸ ì™„í™”
      const rmsGate = rmsAvg * 0.12;

      // UI
      UI.hz.textContent = freq ? freq.toFixed(1) : "-";
      UI.rms.textContent = rms.toFixed(4);
      UI.conf.textContent = confidence.toFixed(2);

      if (freq > 0){
        const n = hzToNoteName(freq);
        UI.note.textContent = n.name;
        UI.cents.textContent = n.cents.toFixed(1);
      } else {
        UI.note.textContent = "-";
        UI.cents.textContent = "-";
      }

      const now = performance.now();
      const elapsed = now - t0;

      if (elapsed < CFG.warmupMs){
        phase = "warmup";
      } else if (elapsed < CFG.warmupMs + CFG.measureMs){
        if (phase !== "measure"){
          phase = "measure";
          UI.phaseHint.textContent = "ì¸¡ì • 3ì´ˆ: í•œ ìŒì„ ìµœëŒ€í•œ ì¼ì •í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.";
        }
      } else {
        phase = "done";
      }

      const totalMs = CFG.warmupMs + CFG.measureMs;
      UI.bar.style.width = clamp((elapsed / totalMs) * 100, 0, 100) + "%";

      if (phase === "measure"){
        allFrames += 1;

        const okRms = rms >= Math.max(0.006, rmsGate);
        const okConf = confidence >= CFG.confidenceGate;

        // âœ… okConfê°€ ë‚®ì•„ë„ ì²´í—˜ì€ ë˜ë„ë¡: ìœ íš¨ í”„ë ˆì„ ì¡°ê±´ ì™„í™”(ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ë§Œì¡±í•´ë„)
        //    ë‹¤ë§Œ ë„ˆë¬´ ëŠìŠ¨í•˜ë©´ ì¡ìŒì´ ì„ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìµœì†Œ RMSëŠ” ìœ ì§€
        if (freq > 0 && okRms && (okConf || confidence >= 0.12)){
          const n = hzToNoteName(freq);
          centsSamples.push(n.cents);
          validFrames += 1;
        }
      }

      if (phase === "done"){
        clearInterval(tickTimer);
        tickTimer=null;
        running=false;
        UI.stopBtn.disabled=true;
        UI.startBtn.disabled=false;
        UI.phaseHint.textContent = "ì™„ë£Œ: ì ìˆ˜ë¥¼ ê³„ì‚°í–ˆìŠµë‹ˆë‹¤.";
        setStatus("done");
        scoreAndRender();
        stop();
      }
    }, CFG.frameMs);

  } catch(err){
    console.error(err);
    setStatus("mic error");
    UI.phaseHint.textContent = "ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œ ë§ˆì´í¬ í—ˆìš© í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
    UI.startBtn.disabled=false;
    UI.stopBtn.disabled=true;
    stop();
  }
}

// ----------- Events -----------
UI.startBtn.addEventListener("click", start);
UI.stopBtn.addEventListener("click", stop);
UI.resetBtn.addEventListener("click", resetAll);

resetAll();
</script>
</body>
</html>
